% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Tutoriel de sauvegarde de ses donn√©es de recherche},
  pdfauthor={Louis Mani√®re - Universit√© de Tours},
  colorlinks=true,
  linkcolor={Maroon},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={blue},
  pdfcreator={LaTeX via pandoc}}

\title{Tutoriel de sauvegarde de ses donn√©es de recherche}
\author{Louis Mani√®re - Universit√© de Tours}
\date{}

\begin{document}
\maketitle

\section{Sauvegarder ses donn√©es --
Tutoriel}\label{sauvegarder-ses-donnuxe9es-tutoriel}

\subsection{Les disques r√©seaux de l'universit√©
üíæ}\label{les-disques-ruxe9seaux-de-luniversituxe9}

Ces serveurs sont bas√©s au Plat d'Etain avec une copie sur le campus de
Grandmont. Deux espaces sont disponibles, l'espaces personnel (U: pour
les utilisateurs de Windows) et l'espace laboratoire (T:). Il y a du
versionnement sur ce stockage, on peut actuellement remonter jusqu'√† une
semaine en arri√®re. Pour l'instant il n'y a pas de limite d'espace
disque mais ce n'est √©videmment pas infinie. Ainsi, comme tout stockage
de donn√©es, la directive est √† la retenue (s√©lectionner ses dossiers √†
sauvegarder, √©viter les doublons, √©viter les nombreuses versions d'un
m√™me fichiers etc.).

Pour les doctorants, sur l'espace du laboratoire (T:) vous trouverez un
dossier \emph{Geosciences/Laboratoire GeHCO/Th√®ses} sur lequel vous
pouvez cr√©er un dossier √† votre nom et y placer vos travaux finalis√©s
(ou presque), soit vos donn√©es finalis√©es avec leur documentation, votre
manuscrit de th√®se, vos articles, protocoles, plans etc. Une bonne
occasion de faire le m√©nage dans ses dossiers en fin de th√®se\ldots{} et
pourquoi pas en profiter pour valoriser ses donn√©es.

On peut acc√©der √† ces disques soit en √©tant branch√© en filaire √†
l'universit√© ou bien en VPN.

\begin{quote}
\textbf{La minute VPN}

\begin{itemize}
\item
  Pour les utilisateur de Windows : vous avez normalement d√©j√†
  l'application \textbf{OpenVPN} d'install√©e. Pour le d√©marrer, √ßa se
  fait en 3 clicks, il y a un
  \href{https://utmedia.univ-tours.fr/permalink/v12664e6412c0z39x92t/iframe/}{tutoriel
  en ligne}.
\item
  Pour les utilisateurs MAC il faut utiliser l'application
  \textbf{Tunnelblick}, demandez √† la DSI pour le mettre en route.
\end{itemize}
\end{quote}

\subsubsection{Utilisateurs de Windows
ü™ü}\label{utilisateurs-de-windows}

Vous trouvez ces disques dans l'explorateurs de fichiers classiques.

\includegraphics{img/disque_reseaux_win.png}

Le disque personnel (U:), si vous ne l'utilisez pas encore devrait √™tre
vide. Vous pouvez y mettre vos donn√©es de recherche, cours etc. comme
vous un disque dur externe avec un simple copier/coller ou bien avec une
m√©thode automatis√©e (vous trouverez la proc√©dure ci-dessous üëá).

\subsubsection{Utilisateurs MAC üçé}\label{utilisateurs-mac}

Il vous faut aller dans \emph{Aller/Se connecter au serveur} pour cr√©er
une nouvelle connexion. On va certainement vous demander votre mot de
passe de l'ordinateur.

\includegraphics{img/disque_reseaux_mac.png}

\begin{itemize}
\tightlist
\item
  Pour le disque personnel il faut mettre l'adresse avec son nom
  utilisateur :
  \href{smb://filerper.univ-tours.local/home/personnels/}{\emph{smb://filerper.univ-tours.local/home/personnels/}}\textbf{\emph{mon\_nom\_utilisateur}}
  Une fois rentr√©, le serveur va certainement vous demander votre
  identifiant et mot de passe de l'ENT cette fois.
\item
  Pour le disque laboratoire, il faut cr√©er une nouvelle connexion avec
  cette adresse :
  \href{smb://filersciences.univ-tours.local/sciences$/Partage/Geosciences}{\emph{smb://filersciences.univ-tours.local/sciences\$/Partage/Geosciences}}
\end{itemize}

Vous devriez avoir acc√®s √† ces espaces directement avec la m√™me d√©marche
\emph{Aller/Se connecter au serveur}.

\subsection{Automatiser ses sauvegardes
ü§ñ}\label{automatiser-ses-sauvegardes}

Une solution simple pour mettre √† jour sa sauvegarde quand on est √†
l'universit√© ou en VPN sans avoir √† y penser est d'installer un petit
logiciel de sauvegarde comme
\href{https://www.2brightsparks.com/download-syncbackfree.html}{\textbf{SyncBackFree}}
pour Windows ou \href{https://freefilesync.org/}{\textbf{FreeFileSync}}
pour Windows/MAC/Linux.

La proc√©dure est la m√™me pour les deux logiciels. Vous d√©signez un
dossier \emph{source}, votre dossier √† sauvegarder, et un dossier de
\emph{destination}, le dossier de sauvegarde sur votre disque r√©seau
personnel (U:) par exemple. Puis il s'agit de cr√©er un \emph{profil} et
de param√©trer un mode de sauvegarde :

\begin{itemize}
\tightlist
\item
  \textbf{Sauvegarder} : Un backup ``simple'', le logiciel scan votre
  dossier \emph{source}, regarde les fichier modifi√©s ou manquants puis
  met √† jour ces fichiers dans la \emph{destination}. Cela √©quivaut √†
  prendre tout son dossier et faire un copier/coller en rempla√ßant les
  fichiers existants. Il n'y a pas de suppression dans la
  \emph{destination}, l'avantage est de conserver ses vieux fichiers
  supprim√©s de son ordinateur, l'inconv√©nient est que l'on conserve ses
  vieux fichiers supprim√©s de son ordinateurs\ldots{} ü§î.
\item
  \textbf{Synchroniser} : C'est le mod√®le des dossiers partag√©s et
  modifiables dans UTbox. Si on modifie un fichier synchronis√© sur son
  poste, on modifie sa copie sur le disque r√©seau lors de la prochaine
  synchronisation. Si on modifie le fichier sur le disque r√©seau, sa
  version sur notre ordinateur sera modifi√© lors de la prochaine
  synchronisation. L'objectif est de toujours avoir la version la plus √†
  jour sur son poste ou sur le serveur. C'est plus un outil de travail
  partag√© qu'un outil de backup.
\item
  \textbf{Miroir} : Un backup qui s'occupe de toujours avoir la copie
  exacte entre la \emph{source} et la \emph{destination}. Le programme
  met donc √† jour les fichiers ajout√©s et modifi√©s de la
  \emph{destination} depuis la source mais supprime √©galement ceux qui
  ont √©t√© mis √† la corbeille. Cela pr√©sente l'avantage de nettoyer la
  sauvegarde en m√™me temps que l'on nettoie son ordinateur des vieux
  fichiers.
\end{itemize}

Il est tout √† fait possible de faire plusieurs profils pour diff√©rents
dossier avec des modes de sauvegarde diff√©rents.

\subsubsection{Un exemple sur
SyncBackFree}\label{un-exemple-sur-syncbackfree}

Je cr√©e un profil avec un nom

\includegraphics{img/syncbackfree_profil.png}

Je choisis le mode de sauvegarde (ici un miroir)

\includegraphics{img/syncbackfree_miroir.png}

Je d√©signe un le type de dossier √† synchroniser entre la \emph{source}
et la \emph{destination}, globalement vous pouvez laisser \emph{Unit√©
interne/externe}. Si votre dossier de sauvegarde est juste l√† pour
assurer la s√©curit√© de vos donn√©es en cas de perte ou vol de votre
ordinateur et que vous allez donc rarement chercher des fichiers dans
votre sauvegarde, vous pouvez alors compresser la destination. Les
informaticiens de la DSI et la plan√®te vous remercierons ü§ó.

\includegraphics{img/syncbackfree_source_destination.png}

Et maintenant on finalise la param√©trisation :

\begin{itemize}
\tightlist
\item
  \emph{Source} : le chemin vers dossier √† sauvegarder sur votre poste,
  ici \emph{C:/Users/maniere/Documents/dossier\_important}
\item
  \emph{Destination} : le chemin vers dossier que vous avez cr√©er sur
  votre espace de sauvegarde qui va servir de copie, ici
  \emph{U:/dossier\_important\_mirror.zip} vers mon disque r√©seau
  personnel.
\end{itemize}

\begin{quote}
\textbf{Info compression !}

Si vous avez choisi de compresser votre dossier de \emph{destination} il
faut bien penser un dossier compress√© plut√¥t qu'un dossier normal. Pour
cela, \emph{clic droit/nouveau/dossier compress√©}.
\end{quote}

Vous pouvez mettre des filtres, des choix de sous-dossier etc., ici on
reste simple et on valide avec \emph{OK}.

Le programme vous diras certainement que ce n'est pas recommand√© de
mettre des chemins de dossier avec des lettres (comme U:) mais il faut
utiliser le vrai chemin qui commence par
\emph{\textbackslash fileper\ldots{}}, vous √™tes tout √† fait d'accord
avec lui et r√©pondez \emph{oui}!

Si vous cr√©√© un miroir vous aurez un avertissement, les fichiers de
\emph{destination} seront supprim√©s s'il ne sont pas sur \emph{source},
vous r√©pondez \emph{OK}, c'est m√™me l'int√©ret de faire un miroir.

\includegraphics{img/syncbackfree_chemin.png}

Vous pouvez enfin lancer votre premi√®re simulation.

\includegraphics{img/syncbackfree_first_scan.png}

En vert on trouve mes deux fichiers √† cr√©er. Tout est normal, on peut
\emph{Continuer la synchronisation}. On voit maintenant notre profil qui
montre que notre simulation est correct, on s√©lectionne notre profil et
on peut maintenant faire une \emph{Execution} pour effectuer les
modifications.

De cette fa√ßon on peut manuellement faire des mise √† jour de notre
sauvegarde avec \emph{Ex√©cution} puis \emph{Continuer l'√©x√©cution}.

Mais on peut aussi :

\subsubsection{Planifier ses sauvegardes
üìÜ}\label{planifier-ses-sauvegardes}

Pour cela s√©lectionner votre profil puis lancer \emph{Planification de
t√¢che}, vous aurez surement √† entrer le mot de passe de votre ordinateur
la premi√®re fois.

Ici il s'agit de rentrer la fr√©quence de mise √† jour de votre
sauvegarde. Ici je mets √† jour ma sauvegarde chaque jour √† 11h.

\includegraphics{img/syncbackfree_planificateur.png}

Il est bon de faire √©galement quelques ajustements suppl√©mentaires dans
l'onglet \emph{Param√®tres} :

\begin{itemize}
\tightlist
\item
  J'√©xecute uniquement la t√¢che si l'ordinateur est connect√©.
\item
  Je choisis de ne pas r√©veiller l'ordinateur pour executer la backup,
  il faut que je soit pr√©sent sur l'ordinateur et non en veille pour que
  la sauvegarde s'effectue.
\item
  Je veux executer cette t√¢che d√®s que je peux si j'ai eu un √©chec, par
  exemple si je ne suis pas en VPN je veux que la sauvegarde se lance
  d√®s que je connecte au r√©seau de l'universit√© ou au VPN.
\item
  J'arr√™te la sauvegarde si elle dure plus de 2h, cela doit se faire
  rapidement sauf peut-√™tre la premi√®re sauvegarde o√π il y a beaucoup de
  chose √† cr√©er.
\end{itemize}

\includegraphics{img/syncbackfree_param_planification.png}

Une fois la planification param√©tr√©e vous pouvez v√©rifier en ouvrant le
logiciel voir quand s'est effectu√©e la derni√®re sauvegarde et si cela
s'est bien d√©roul√©.

\subsubsection{FreeFileSync pour les utilisateurs MAC et
Linux}\label{freefilesync-pour-les-utilisateurs-mac-et-linux}

Le principe reste le m√™me que \textbf{SyncBackFree}, il y a juste
l'interface qui change et la planification qui est possible mais pas
aussi int√©gr√© au logiciel.

Les vid√©os tutoriel sont disponible
\href{https://freefilesync.org/tutorials.php}{ici} pour faire un
mirroir, une sauvegarde simple ou de la planification. La planification
sur les diff√©rentes plateformes Windows, MAC ou Linux est √©galement
d√©taill√©e dans la
\href{https://freefilesync.org/manual.php?topic=schedule-batch-jobs}{documentation}.

\subsection{UTbox}\label{utbox}

UTbox est un le cloud de l'universit√© qui fonctionne en ligne via l'ENT
mais vos dossiers ainsi que ceux qui vous ont √©t√© partag√© peuvent √™tre
disponible sur votre ordinateur dans l'explorateur de fichier. Cela se
passe sur l'application \textbf{Nextcloud} d√©j√† pr√©sent sur vos poste de
travail ou tr√®s facile √† installer si ce n'est pas le cas.

\begin{quote}
\textbf{Le saviez-vous ?}

Un tutoriel de l'application Nextcloud et d'UTbox se trouve d√©j√† (et
cela depuis le d√©but!) sur votre espace UTbox. Rendez-vous sur
\textbf{UTBOX\_pas\_√†\_pas.pdf} dans votre dossier UTbox \emph{UTbox -
Documentation utilisateur}
\end{quote}

Comme pr√©cis√© dans le tutoriel de l'universit√©, la synchronisation n'est
pas adapt√©e √† une sauvegarde. UTbox est davantage un outil de travail
collaboratif que de sauvegarde des donn√©es.

\end{document}
